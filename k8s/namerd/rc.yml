kind: ReplicationController
apiVersion: v1
metadata:
  namespace: default
  name: namerd
spec:
  replicas: 1
  selector:
    app: namerd
  template:
    metadata:
      labels:
        app: namerd
    spec:
      dnsPolicy: ClusterFirst

      volumes:
        - name: namerd-config
          configMap:
            name: namerd-config

      containers:
        - name: namerd
          image: buoyantio/namerd:0.5.0
          args:
            - /io.buoyant/namerd/config/config.yml
            - -com.twitter.finagle.tracing.debugTrace=true
            - -log.level=DEBUG

          ports:
            - name: sync
              containerPort: 4100
            - name: ctl
              containerPort: 4180

          volumeMounts:
            - name: "namerd-config"
              mountPath: "/io.buoyant/namerd/config"
              readOnly: true
        - name: kubectl
          image: gcr.io/google_containers/kubectl:v0.18.0-120-gaeb4ac55ad12b1-dirty
          args:
          - "proxy"
          - "-p"
          - "8001"
